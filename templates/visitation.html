{% extends 'base.html' %}

{% block title %}Interview with Camera{% endblock %}

{% block content %}

    <!-- Main Content -->
    <div class="column is-10">
        <!-- Form starts here -->
        <form method="post" enctype="multipart/form-data">

            <!-- Kundenauswahl -->
            <div class="box">
                <div class="field">
                    <label class="label">Kunde auswählen</label>
                    <div class="control">
                        <div class="select is-primary">
                            <select name="dropdown_option">
                                {% for client in clients %}
                                <option value="{{ option | lower }}">{{ client }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Camera Button Section -->
            <div class="box">
                <div class="field">
                    <label class="label">Foto aufnehmen</label>
                    <div class="control">
                        <button class="button is-primary" type="button" onclick="useCamera()">Kamera verwenden</button>
                    </div>
                </div>

                <!-- Video display -->
                <div class="box">
                    <div class="field">
                        <label class="label">Kameravorschau</label>
                        <video id="cameraPreview" width="640" height="480" autoplay></video>
                    </div>
                </div>
            </div>

            <!-- JavaScript to activate the camera and show video feed -->
            <script>
                function useCamera() {
                    const video = document.getElementById('cameraPreview');
                    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
                        navigator.mediaDevices.getUserMedia({ video: true })
                        .then(function (stream) {
                            video.srcObject = stream;
                        })
                        .catch(function (error) {
                            console.error("Error accessing the camera: ", error);
                        });
                    } else {
                        alert("Your browser does not support camera access.");
                    }
                }
            </script>

            <!-- Question 1 -->
            <div class="box">
                <div class="field">
                    <label class="label">Beschreibung für das Foto</label>
                    <div class="control">
                        <textarea class="textarea" name="question_1"></textarea>
                    </div>
                </div>
            </div>

            <!-- Question 2 -->
            <div class="box">
                <div class="field">
                    <label class="label">Wo wurde das Foto aufgenommen?</label>
                    <div class="control">
                        <textarea class="textarea" name="question_2"></textarea>
                    </div>
                </div>
            </div>

            <!-- Submit Button -->
            <div class="field is-grouped">
                <div class="control">
                    <input class="button is-primary" type="submit" value="Speichern">
                </div>
            </div>
        </form>
        <!-- Form ends here -->
    </div>

{% endblock %}
